---
layout: post
title: Git使用技巧完全指南
date: 2019-11-28 16:21:00
forType: git
category: git
tag: [git, 使用技巧]
---

* content
{:toc}

# Git使用技巧完全指南

本文档汇总了Git版本控制系统的常用配置和使用技巧，帮助您更高效地管理代码仓库。

## Git基础配置

### 用户信息配置

在使用Git前，首先需要配置您的用户信息，这将出现在您的所有提交记录中：

```bash
# 配置全局用户名
git config --global user.name "您的用户名"

# 配置全局邮箱
git config --global user.email "您的邮箱地址"

# 示例
git config --global user.name "Liuaj"
git config --global user.email "aijia930515@163.com"
```

### 其他常用配置

```bash
# 设置默认编辑器
git config --global core.editor "vim"

# 设置命令别名
git config --global alias.st status
git config --global alias.ci commit
git config --global alias.co checkout
git config --global alias.br branch
\# 开启彩色输出
git config --global color.ui true
```

## 仓库管理基础

### 克隆仓库

```bash
# 克隆远程仓库到本地
git clone <仓库URL>

# 示例
git clone https://github.com/username/repository.git
```

### 分支管理

```bash
# 查看本地分支
git branch

# 查看所有分支（包括远程分支）
git branch -a

# 创建新分支
git branch <新分支名>

# 切换分支
git checkout <分支名>

# 创建并切换到新分支
git checkout -b <新分支名>

# 删除分支
git branch -d <分支名>

# 强制删除分支
git branch -D <分支名>

# 推送本地分支到远程
git push origin <分支名>

# 设置本地分支跟踪远程分支
git branch --set-upstream-to=origin/<远程分支名> <本地分支名>
```

## 基本工作流程

### 日常操作

```bash
# 拉取远程分支更新到本地
git pull

# 查看文件状态
git status

# 添加文件到暂存区
git add <文件路径>

# 添加所有修改的文件到暂存区
git add .

# 提交更改
git commit -m "提交说明"

# 推送提交到远程仓库
git push
```

### 撤销操作

```bash
# 撤销最后一次提交（保留更改）
git reset HEAD~1

# 撤销最后一次提交（丢弃更改）
git reset --hard HEAD~1

# 丢弃所有未提交的本地修改
git reset --hard HEAD

# 撤销特定文件的修改
git checkout -- <文件路径>
```

## 高级操作

### 强制同步远程分支

当本地分支与远程分支差异较大，需要完全同步远程分支时：

```bash
# 获取所有远程更新
git fetch --all

# 强制将本地分支重置为远程分支状态
git reset --hard origin/<分支名>

# 清除未跟踪的文件和目录
git clean -fd
```

### 解决冲突

```bash
# 查看冲突文件
git status

# 手动编辑冲突文件，解决冲突后
git add <冲突文件>
git commit -m "解决冲突"
```

## Git账号与认证配置

### 配置特定仓库的用户信息

您可以为特定仓库配置不同的用户信息，覆盖全局配置：

```bash
# 进入仓库目录
cd /path/to/repository

# 配置当前仓库的用户信息
git config user.name "特定仓库用户名"
git config user.email "特定仓库邮箱"
```

您也可以直接编辑`.git/config`文件添加以下配置：

```gitconfig
[user]
	name = 用户名
	email = 用户邮箱
```

### 密码缓存配置

为了避免每次操作都输入密码，可以配置Git的凭据缓存：

```bash
# 设置记住密码（默认15分钟）
git config --global credential.helper cache

# 自定义缓存时间（这里设置为1小时）
git config --global credential.helper 'cache --timeout=3600'

# 长期存储密码
git config --global credential.helper store
```

您也可以直接在`.git/config`文件中添加以下配置：

```gitconfig
[credential]
    helper = store
    # 或使用缓存方式
    # helper = cache --timeout=3600
```

## 多SSH密钥配置

当需要在同一台电脑上使用多个Git账号（如同时使用GitHub和Gitee）时，可以配置多个SSH密钥：

```bash
# 生成GitHub的SSH密钥
ssh-keygen -t rsa -C '您的邮箱' -f ~/.ssh/github_rsa

# 生成Gitee的SSH密钥
ssh-keygen -t rsa -C '您的邮箱' -f ~/.ssh/gitee_rsa

# 启动SSH代理
ssh-agent bash

# 添加SSH密钥到代理
ssh-add ~/.ssh/github_rsa
ssh-add ~/.ssh/gitee_rsa

# 查看生成的公钥内容（复制到GitHub/Gitee的SSH设置中）
cat ~/.ssh/github_rsa.pub
cat ~/.ssh/gitee_rsa.pub

# 创建SSH配置文件
cd ~/.ssh
touch config
vim config
```

在config文件中添加以下内容：

```
# Gitee配置
Host gitee.com
    HostName gitee.com
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/gitee_rsa

# GitHub配置
Host github.com
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/github_rsa
```

验证配置是否成功：

```bash
# 测试GitHub连接
ssh -T git@github.com

# 测试Gitee连接
ssh -T git@gitee.com
```

## 使用提示

1. 定期使用`git pull`保持本地仓库与远程同步
2. 提交信息要清晰明了，描述具体做了什么修改
3. 合理使用分支管理不同功能或版本的开发
4. 重要操作前可以使用`git status`和`git log`查看当前状态
5. 对于不熟悉的Git命令，可以使用`git help <命令>`查看帮助文档